<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Peruri SSO Portal - Mock</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .portal-container {
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        max-width: 800px;
        width: 90%;
      }

      .header {
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        color: white;
        padding: 2rem;
        text-align: center;
      }

      .header h1 {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
        font-weight: 300;
      }

      .header p {
        opacity: 0.9;
        font-size: 1.1rem;
      }

      .logo {
        width: 80px;
        height: 80px;
        background: white;
        border-radius: 50%;
        margin: 0 auto 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        color: #1e3c72;
        font-weight: bold;
      }

      .content {
        padding: 3rem;
      }

      .user-info {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 1.5rem;
        margin-bottom: 2rem;
        border-left: 4px solid #2a5298;
      }

      .user-info h3 {
        color: #1e3c72;
        margin-bottom: 1rem;
      }

      .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
      }

      .info-item {
        display: flex;
        flex-direction: column;
      }

      .info-label {
        font-weight: 600;
        color: #555;
        font-size: 0.9rem;
        margin-bottom: 0.2rem;
      }

      .info-value {
        color: #333;
        font-size: 1rem;
      }

      .roles-container {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 0.5rem;
      }

      .role-badge {
        background: #e3f2fd;
        color: #1565c0;
        padding: 0.3rem 0.8rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 500;
      }

      .apps-section {
        margin-top: 2rem;
      }

      .apps-section h3 {
        color: #1e3c72;
        margin-bottom: 1.5rem;
        text-align: center;
      }

      .apps-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
      }

      .app-card {
        background: white;
        border: 2px solid #e9ecef;
        border-radius: 15px;
        padding: 1.5rem;
        text-align: center;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .app-card:hover {
        border-color: #2a5298;
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(42, 82, 152, 0.15);
      }

      .app-card.featured {
        border-color: #2a5298;
        background: linear-gradient(135deg, #f8fbff 0%, #e3f2fd 100%);
      }

      .app-icon {
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
        border-radius: 50%;
        margin: 0 auto 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        color: white;
      }

      .app-card h4 {
        color: #1e3c72;
        margin-bottom: 0.5rem;
        font-size: 1.2rem;
      }

      .app-card p {
        color: #666;
        font-size: 0.9rem;
        margin-bottom: 1rem;
      }

      .launch-btn {
        background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
        color: white;
        border: none;
        padding: 0.8rem 1.5rem;
        border-radius: 25px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        width: 100%;
        font-size: 1rem;
      }

      .launch-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(42, 82, 152, 0.4);
      }

      .launch-btn:active {
        transform: translateY(0);
      }

      .status-indicator {
        display: inline-block;
        width: 8px;
        height: 8px;
        background: #4caf50;
        border-radius: 50%;
        margin-right: 0.5rem;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
        100% {
          opacity: 1;
        }
      }

      .footer {
        background: #f8f9fa;
        padding: 1rem 3rem;
        text-align: center;
        color: #666;
        font-size: 0.9rem;
      }

      .token-info {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        border-radius: 8px;
        padding: 1rem;
        margin: 1rem 0;
        font-size: 0.9rem;
      }

      .token-info strong {
        color: #856404;
      }

      @media (max-width: 768px) {
        .portal-container {
          margin: 1rem;
          width: calc(100% - 2rem);
        }

        .content {
          padding: 2rem;
        }

        .header {
          padding: 1.5rem;
        }

        .header h1 {
          font-size: 2rem;
        }

        .info-grid {
          grid-template-columns: 1fr;
        }

        .apps-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="portal-container">
      <div class="header">
        <div class="logo">P</div>
        <h1>Peruri Portal</h1>
        <p>Single Sign-On Dashboard</p>
      </div>

      <div class="content">
        <div class="user-info">
          <h3>üë§ Logged in as:</h3>
          <div class="info-grid">
            <div class="info-item">
              <span class="info-label">Full Name</span>
              <span class="info-value">7780 WAHYU EDI SANTOSO</span>
            </div>
            <div class="info-item">
              <span class="info-label">Username</span>
              <span class="info-value">wahyu.santoso</span>
            </div>
            <div class="info-item">
              <span class="info-label">Email</span>
              <span class="info-value">1930.7780@peruri.co.id</span>
            </div>
            <div class="info-item">
              <span class="info-label">Employee ID</span>
              <span class="info-value">7780</span>
            </div>
          </div>
          <div class="info-item" style="margin-top: 1rem">
            <span class="info-label">AIVA Roles</span>
            <div class="roles-container">
              <span class="role-badge">hukum</span>
            </div>
          </div>
        </div>

        <div class="token-info">
          <strong>üîí For Testing:</strong> This mock portal will send a sample JWT token to the Chat Bot application for
          SSO integration testing. The token contains the user information shown above.
        </div>

        <div class="apps-section">
          <h3>üì± Available Applications</h3>
          <div class="apps-grid">
            <div class="app-card featured">
              <div class="app-icon">ü§ñ</div>
              <h4>AI Chat Bot</h4>
              <p>Intelligent conversational assistant with role-based access control</p>
              <div style="margin-bottom: 1rem">
                <span class="status-indicator"></span>
                <small style="color: #4caf50; font-weight: 600">Online</small>
              </div>
              <button class="launch-btn" onclick="launchChatBot()">Launch Chat Bot</button>
            </div>

            <div class="app-card">
              <div class="app-icon">üìä</div>
              <h4>DSS Analytics</h4>
              <p>Decision Support System for data analysis and reporting</p>
              <div style="margin-bottom: 1rem">
                <span class="status-indicator"></span>
                <small style="color: #4caf50; font-weight: 600">Online</small>
              </div>
              <button class="launch-btn" onclick="showComingSoon('DSS Analytics')">Launch DSS</button>
            </div>

            <div class="app-card">
              <div class="app-icon">üë•</div>
              <h4>QUMON</h4>
              <p>Quality monitoring and production management system</p>
              <div style="margin-bottom: 1rem">
                <span class="status-indicator"></span>
                <small style="color: #4caf50; font-weight: 600">Online</small>
              </div>
              <button class="launch-btn" onclick="showComingSoon('QUMON')">Launch QUMON</button>
            </div>

            <div class="app-card">
              <div class="app-icon">üè¢</div>
              <h4>SIDIA</h4>
              <p>Internal microservices management platform</p>
              <div style="margin-bottom: 1rem">
                <span class="status-indicator"></span>
                <small style="color: #4caf50; font-weight: 600">Online</small>
              </div>
              <button class="launch-btn" onclick="showComingSoon('SIDIA')">Launch SIDIA</button>
            </div>
          </div>
        </div>
      </div>

      <div class="footer">
        <p>&copy; 2025 PT Peruri (Persero) - Digital Services Portal</p>
      </div>
    </div>

    <script>
      // Sample JWT token for testing (the one provided by the user)
      const SAMPLE_TOKEN =
        'eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIyZTBmNjkzOC05ODU4LTQwZDgtOTczMy1kN2FhMmZkZjFmMGMifQ.eyJleHAiOjE3NTUyNTU5ODksImlhdCI6MTc1NTIxOTk4OSwianRpIjoiNmQwYmI5YjQtNmU2Ny00YTUyLWExMGItZGFmZTI2YWJjYWE5IiwiaXNzIjoiaHR0cHM6Ly8xMC4zMC4xMS4xNjc6NDQ0NC9yZWFsbXMvcGVydXJpIiwiYXVkIjpbIm9tdGktcGVydXJpIiwicmVhbG0tbWFuYWdlbWVudCIsImRzcy1wZXJ1cmkiLCJxdW1vbi1wZXJ1cmkiLCJraW5lcmpha3UtcGVydXJpIiwiYnJva2VyIiwiZXNzLXBlcnVyaSIsInNpZGlhLW1pY3Jvc2VydmljZXMtcGVydXJpIiwicG9ydGFsLXBlcnVyaSIsInNpaGVwaS1zc28iLCJhZG1pbi1jbGkiLCJkdW1teV9wcm9qZWN0IiwiYWNjb3VudCIsImVpbnZvaWNlLXBlcnVyaSIsIm1vbml0b3JpbmctcGVydXJpIl0sInN1YiI6ImUzOTY4ZGU3LTdmNjUtNDY0OC05M2QzLTllYjE3NjllMDgyMiIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFpdmEtcGVydXJpIiwic2Vzc2lvbl9zdGF0ZSI6IjlmYThhMzYzLTJmNWQtNDU3Yi04OTNiLTQ0YzYwZjZiN2Q4NSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2xvY2FsaG9zdCJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiIsImRlZmF1bHQtcm9sZXMtcGVydXJpIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsib210aS1wZXJ1cmkiOnsicm9sZXMiOlsiYWRtaW4gZGVwYXJ0ZW1lbiJdfSwicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJ2aWV3LWlkZW50aXR5LXByb3ZpZGVycyIsInZpZXctcmVhbG0iLCJtYW5hZ2UtaWRlbnRpdHktcHJvdmlkZXJzIiwiaW1wZXJzb25hdGlvbiIsInJlYWxtLWFkbWluIiwiY3JlYXRlLWNsaWVudCIsIm1hbmFnZS11c2VycyIsInF1ZXJ5LXJlYWxtcyIsInZpZXctYXV0aG9yaXphdGlvbiIsInF1ZXJ5LWNsaWVudHMiLCJxdWVyeS11c2VycyIsIm1hbmFnZS1ldmVudHMiLCJtYW5hZ2UtcmVhbG0iLCJ2aWV3LWV2ZW50cyIsInZpZXctdXNlcnMiLCJ2aWV3LWNsaWVudHMiLCJtYW5hZ2UtYXV0aG9yaXphdGlvbiIsIm1hbmFnZS1jbGllbnRzIiwicXVlcnktZ3JvdXBzIl19LCJkc3MtcGVydXJpIjp7InJvbGVzIjpbImRhdGEgYW5hbGlzIHNidSB1YW5nIiwiUXVtb24iLCJJbnRlcm5hbCBTUEkiLCJkYXRhIGFuYWxpcyBwZW5nZW1iYW5nYW4gdXNhaGEiLCJkYXRhIGFuYWxpcyBzYnUgbm9uIHVhbmciLCJEYXRhIEFuYWxpcyBTUEkiLCJLZXNlaGF0YW4iLCJkYXRhIGFuYWxpcyBkYWZhc3VtIiwiZGF0YSBhbmFsaXMgcHJvYmlzIGludGVybmFzaW9uYWwiLCJzdXBlciBhZG1pbiIsIlRhc2tmb3JjZSBDb3ZpZCIsIlN1bW1hcnkiLCJTaW1hbmRvciIsIklUT0MgUGVydXJpIl19LCJhaXZhLXBlcnVyaSI6eyJyb2xlcyI6WyJodWt1bSJdfSwicXVtb24tcGVydXJpIjp7InJvbGVzIjpbIlNla3NpIENldHNvcnVnYW0iLCJBZG1pbiBQS1AgVXRhcyIsIkRlcGRhbGl0YXMiLCJWaWV3ZXIgVWdhbSIsIlN1cGVyIEFkbWluIiwiU2FpcGFyc2lhbCBMaW5pIEIiLCJQS1AgVWdhbSIsIlNhaSBQYXJzaWFsIExpbmkgQSIsIktoYXpzYWkgTGluaSBCIiwiS2hhenNhaSBMaW5pIEEiLCJTZWtzaSBQS1AiLCJBZG1pbiBSaWtzYXIiLCJWaWV3ZXIgVXRhcyIsIktoYXpjdXRhcyBMaW5pIEEiLCJDdXRwYWsgTGluaSBBIiwiS2hhemN1dGFzIExpbmkgQiIsIlNla3NpIEtoYXpwcm9kdWdhbSIsIkN1dHBhayBMaW5pIEIiLCJQUElDIl19LCJraW5lcmpha3UtcGVydXJpIjp7InJvbGVzIjpbIlBlbmdndW5hIl19LCJicm9rZXIiOnsicm9sZXMiOlsicmVhZC10b2tlbiJdfSwiZXNzLXBlcnVyaSI6eyJyb2xlcyI6WyJQZXR1Z2FzIFBhbXNpa25pbG1hdFxyXG4iLCJLb21hbmRhbiBQb3NrbyIsIkFkbWluIFBhbXNpa25pbG1hdCIsIlN1cGVyYWRtaW4iLCJQZW5nZ3VuYSIsIkFkbWluIFBhbXNpa25pbG1hdCAtIE1hc3RlciBEYXRhIl19LCJzaWRpYS1taWNyb3NlcnZpY2VzLXBlcnVyaSI6eyJyb2xlcyI6WyJEaXJla3RvcmF0IFNETSwgVGVrbm9sb2dpLCBkYW4gSW5mb3JtYXNpIiwiRGVwYXJ0ZW1lbiBQZXJlbmNhbmFhbiBkYW4gVXRpbGl0YXMiLCJEaXZpc2kgUGVuZ2FtYW5hbiwgSzMgZGFuIExpbmdrdW5nYW4iLCJTZWtzaSBQZWxheWFuYW4gS2FyeWF3YW4iLCJTZWtzaSBIdWJ1bmdhbiBJbmR1c3RyaWFsIiwiU2Vrc2kgUmVtdW5lcmFzaSBkYW4gSFJJUyIsIkRlcGFydGVtZW4gUGVyc2lhcGFuIGRhbiBDZXRhayBQcm9kdWsgTm9uIFVhbmciLCJEZXBhcnRlbWVuIFBlbmp1YWxhbiAxIiwiRGVwYXJ0ZW1lbiBQZW5nZWxvbGFhbiBBc2V0IFBlcnVzYWhhYW4iLCJEaXJla3RvcmF0IFBlbmdlbWJhbmdhbiBVc2FoYSIsIkRlcGFydGVtZW4gUGVtYXNhcmFuIiwiRGVwYXJ0ZW1lbiBBa3VudGFuc2kiLCJEZXBhcnRlbWVuIEh1bWFuIFJlc291cmNlcyBCdXNpbmVzcyBQYXJ0bmVyIGRhbiBIdWJ1bmdhbiBJbmR1c3RyaWFsIiwiU2Vrc2kgRGVzYWluIiwiU2Vrc2kgQWt1bnRhbnNpIFVtdW0iLCJEaWdpdGFsIFNlcnZpY2UgT3BlcmF0aW9uIERlcGFydG1lbnQiLCJQZXJ1cmkgQ2VydGlmaWNhdGUgQXV0aG9yaXR5IFNlY3Rpb24iLCJTZWtzaSBQZW5nZW1iYW5nYW4gSW5mcmFzdHJ1a3R1ciBUZWtub2xvZ2kgSW5mb3JtYXNpIiwiU2Vrc2kgUGVuZ2VtYmFuZ2FuIEFwbGlrYXNpIEludGVybmFsIiwiVW5pdCBQZWxheWFuYW4gS2VzZWhhdGFuIiwiU2Vrc2kgUGVtZWxpaGFyYWFuIEJhbmd1bmFuIGRhbiBQZW5hdGFhbiBMaW5na3VuZ2FuIl19LCJwb3J0YWwtcGVydXJpIjp7InJvbGVzIjpbInVtYV9wcm90ZWN0aW9uIl19LCJzaWhlcGktc3NvIjp7InJvbGVzIjpbIlVzZXIiLCJUZWtuaXNpIFRJIl19LCJhZG1pbi1jbGkiOnsicm9sZXMiOlsidW1hX3Byb3RlY3Rpb24iXX0sImR1bW15X3Byb2plY3QiOnsicm9sZXMiOlsiZGF0YSBhbmFsaXMgc2J1IHVhbmciLCJRdW1vbiIsIkludGVybmFsIFNQSSIsImRhdGEgYW5hbGlzIHBlbmdlbWJhbmdhbiB1c2FoYSIsImRhdGEgYW5hbGlzIHNidSBub24gdWFuZyIsIktlc2VoYXRhbiIsIkRhdGEgQW5hbGlzIFNQSSIsImRhdGEgYW5hbGlzIGRhZmFzdW0iLCJkYXRhIGFuYWxpcyBwcm9iaXMgaW50ZXJuYXNpb25hbCIsInN1cGVyIGFkbWluIiwiVGFza2ZvcmNlIENvdmlkIiwiU3VtbWFyeSIsIlNpbWFuZG9yIiwiSVRPQyBQZXJ1cmkiXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJ2aWV3LWFwcGxpY2F0aW9ucyIsInZpZXctY29uc2VudCIsInZpZXctZ3JvdXBzIiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJtYW5hZ2UtY29uc2VudCIsImRlbGV0ZS1hY2NvdW50Iiwidmlldy1wcm9maWxlIl19LCJlaW52b2ljZS1wZXJ1cmkiOnsicm9sZXMiOlsiUGVuanVybmFsIiwiUElDIFVuaXQgS2VyamEiXX0sIm1vbml0b3JpbmctcGVydXJpIjp7InJvbGVzIjpbIkFkbWluaXN0cmF0b3IiLCJVc2VyIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiOWZhOGEzNjMtMmY1ZC00NTdiLTg5M2ItNDRjNjBmNmI3ZDg1IiwiZW1haWxfdmVyaWZpZWQiOnRydWUsIm5hbWUiOiI3NzgwIFdBSFlVIEVESSBTQU5UT1NPIiwicHJlZmVycmVkX3VzZXJuYW1lIjoid2FoeXUuc2FudG9zbyIsImdpdmVuX25hbWUiOiI3NzgwIiwiZmFtaWx5X25hbWUiOiJXQUhZVSBFREkgU0FOVE9TTyIsImVtYWlsIjoiMTkzMC43NzgwQHBlcnVyaS5jby5pZCJ9.KzQvHynfPkHP8RIh3543M_bGKBjUqEAUz2KxZao3NPY';

      let chatBotWindow = null;

      function launchChatBot() {
        console.log('üöÄ Launching Chat Bot application...');

        // Chat Bot URL - for development, use root path
        // const chatBotUrl = 'http://localhost:3000/';
        const chatBotUrl = 'http://10.30.14.33/31119/';

        // Open the chat bot in a new window
        chatBotWindow = window.open(chatBotUrl, 'chatbot', 'width=1200,height=800,scrollbars=yes,resizable=yes');

        if (!chatBotWindow) {
          alert('Popup was blocked! Please allow popups for this site and try again.');
          return;
        }

        // Wait for the window to load, then start the SSO flow
        setTimeout(() => {
          initiateSSOFlow();
        }, 2000);
      }

      function initiateSSOFlow() {
        if (!chatBotWindow || chatBotWindow.closed) {
          console.error('Chat bot window is not available');
          return;
        }

        console.log('üîÑ Initiating SSO flow...');

        // Send ping to check if the chat bot is ready
        chatBotWindow.postMessage('ping', '*');

        // Listen for responses from the chat bot
        window.addEventListener('message', handleChatBotResponse);
      }

      function handleChatBotResponse(event) {
        if (event.source !== chatBotWindow) return;

        console.log('üì® Received message from Chat Bot:', event.data);

        if (event.data === 'ready') {
          console.log('‚úÖ Chat Bot is ready, sending token...');

          // Send the SSO token - using both formats for compatibility
          setTimeout(() => {
            chatBotWindow.postMessage(
              {
                token: SAMPLE_TOKEN, // Legacy format
                access_token: SAMPLE_TOKEN, // Standard OAuth format
              },
              '*'
            );
          }, 500);
        }

        if (event.data === 'token_received') {
          console.log('üéâ SSO token successfully received by Chat Bot');

          // Optional: Show success message
          showNotification('‚úÖ SSO login successful! You are now logged in to Chat Bot.', 'success');

          // Remove the event listener
          window.removeEventListener('message', handleChatBotResponse);
        }
      }

      function showComingSoon(appName) {
        showNotification(`üöß ${appName} integration is coming soon!`, 'info');
      }

      function showNotification(message, type = 'info') {
        // Create notification element
        const notification = document.createElement('div');
        notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                color: white;
                font-weight: 600;
                z-index: 10000;
                max-width: 400px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                animation: slideIn 0.3s ease-out;
            `;

        // Set background color based on type
        const colors = {
          success: '#4caf50',
          info: '#2196f3',
          warning: '#ff9800',
          error: '#f44336',
        };
        notification.style.backgroundColor = colors[type] || colors.info;

        notification.textContent = message;

        document.body.appendChild(notification);

        // Remove after 5 seconds
        setTimeout(() => {
          notification.style.animation = 'slideOut 0.3s ease-out';
          setTimeout(() => {
            if (notification.parentNode) {
              notification.parentNode.removeChild(notification);
            }
          }, 300);
        }, 5000);
      }

      // Add CSS animations
      const style = document.createElement('style');
      style.textContent = `
            @keyframes slideIn {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }

            @keyframes slideOut {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(100%);
                    opacity: 0;
                }
            }
        `;
      document.head.appendChild(style);

      // Log that the portal is ready
      console.log('üè¢ Peruri SSO Portal Mock is ready');
      console.log('üîë Sample token loaded for user: wahyu.santoso');
      console.log('üë§ Authority: hukum (from aiva-peruri.roles[0])');
    </script>
  </body>
</html>
